---
draft: yes
title: The Burger King Pandemic
author: ''
date: '2018-08-12'
slug: the-burger-king-pandemic
categories: []
tags:
  - data wrangling
  - R
  - visualisation
  - tidyverse
  - gifski
  - animation
  - rvest
  - glue
  - geospatial
description: ''
thumbnail: ''
---



<p>Whilst I was rooting around for inspiration, my girlfriend suggested I should do a post about food, quickly followed up by “burgers!!!”. So a few google searches later and I decided to create an animated map, showing all the countries of the world that had at least one Burger King store.</p>
<p>I’m particularly chuffed that I’ve managed to combine a multitude of really cool packages in this post. We’ve got:</p>
<ul>
<li>Data scraped off Wikipedia using the <code>rvest</code> <a href="https://cran.r-project.org/web/packages/rvest/rvest.pdf">package</a> in conjunction with the <code>purr</code> <a href="https://cran.r-project.org/web/packages/purrr/purrr.pdf">package</a>.</li>
<li>Some classic data manipulation using the wonders of the <a href="https://www.tidyverse.org/">tidyverse</a></li>
<li>Using the <code>glue</code> <a href="https://cran.r-project.org/web/packages/glue/glue.pdf">package</a> to format and interpolate strings.</li>
<li>Creating a geospatial visualisation using the new <code>ggplot2</code> <a href="https://ggplot2.tidyverse.org/">release</a>, with the <code>sf</code> <a href="https://cran.r-project.org/web/packages/sf/sf.pdf">package</a> and obtaining data from the <code>rnaturalearth</code> <a href="https://cran.r-project.org/web/packages/rnaturalearth/README.html">package</a>.</li>
<li>Animating the visualisation using the <code>gifski</code> <a href="https://cran.r-project.org/web/packages/gifski/gifski.pdf">package</a></li>
</ul>
<p>Ok so lets get started.</p>
<pre class="r"><code>library(tidyverse)</code></pre>
<pre><code>## -- Attaching packages ------------------------------------------------------------------ tidyverse 1.2.1 --</code></pre>
<pre><code>## v ggplot2 3.0.0     v purrr   0.2.5
## v tibble  1.4.2     v dplyr   0.7.5
## v tidyr   0.8.1     v stringr 1.3.1
## v readr   1.1.1     v forcats 0.3.0</code></pre>
<pre><code>## Warning: package &#39;ggplot2&#39; was built under R version 3.5.1</code></pre>
<pre><code>## -- Conflicts --------------------------------------------------------------------- tidyverse_conflicts() --
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()</code></pre>
<pre class="r"><code>library(rvest)</code></pre>
<pre><code>## Warning: package &#39;rvest&#39; was built under R version 3.5.1</code></pre>
<pre><code>## Loading required package: xml2</code></pre>
<pre><code>## 
## Attaching package: &#39;rvest&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:purrr&#39;:
## 
##     pluck</code></pre>
<pre><code>## The following object is masked from &#39;package:readr&#39;:
## 
##     guess_encoding</code></pre>
<pre class="r"><code>library(sf)</code></pre>
<pre><code>## Linking to GEOS 3.6.1, GDAL 2.2.3, proj.4 4.9.3</code></pre>
<pre class="r"><code>library(glue)</code></pre>
<pre><code>## Warning: package &#39;glue&#39; was built under R version 3.5.1</code></pre>
<pre><code>## 
## Attaching package: &#39;glue&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:dplyr&#39;:
## 
##     collapse</code></pre>
<pre class="r"><code>library(rnaturalearth)</code></pre>
<pre><code>## Warning: package &#39;rnaturalearth&#39; was built under R version 3.5.1</code></pre>
<pre class="r"><code>library(gifski)</code></pre>
<pre><code>## Warning: package &#39;gifski&#39; was built under R version 3.5.1</code></pre>
<p>Firstly I’ve located the data I want, a Wikipedia <a href="https://en.wikipedia.org/wiki/List_of_countries_with_Burger_King_franchises">page</a> that lists the countries with Burger King franchises.</p>
<pre class="r"><code>url &lt;- &quot;https://en.wikipedia.org/wiki/List_of_countries_with_Burger_King_franchises&quot;</code></pre>
<p>Now to scrape the data from each table we need to know the Xpath or CSS selector. Normally I would use the Selector Gadget chrome addin to get the selector, (à la this <a href="http://categitau.com/using-rvest-to-scrape-data-from-wikipedia/">blog</a>), but I couldn’t get it to work. So I inspected the element of the first table and got <code>'//*[@id=&quot;mw-content-text&quot;]/div/table[2]')</code>. A quick scroll down and I figured out I want tables 2 - 8. So to iterate through these 7 tables, I constructed a function to extract the data.</p>
<pre class="r"><code>extract_table_df &lt;- function(table_no){
  table &lt;- url %&gt;%
    read_html() %&gt;%
    html_nodes(xpath = glue(&#39;//*[@id=&quot;mw-content-text&quot;]/div/table[{table_no}]&#39;)) %&gt;%
    html_table()
  table_df &lt;- table[[1]] %&gt;%
    mutate(Yearentered = as.character(Yearentered))
}</code></pre>
<p>Now we can use this function combined with the <code>purrr</code> function <code>map_dfr</code> to iterate through the 8 tables and bind them together.</p>
<pre class="r"><code>data &lt;- map_dfr(2:8, extract_table_df)
data</code></pre>
<pre><code>##         Country/territory Yearentered
## 1                   Egypt        2007
## 2                   Ghana        2018
## 3             Ivory Coast        2015
## 4                   Kenya        2016
## 5                 Morocco        2011
## 6            South Africa        2013
## 7                    &lt;NA&gt;            
## 8                    &lt;NA&gt;            
## 9                    &lt;NA&gt;        2016
## 10                   &lt;NA&gt;        2014
## 11                   &lt;NA&gt;        2013
## 12                   &lt;NA&gt;        2005
## 13                   &lt;NA&gt;        1979
## 14                   &lt;NA&gt;        2014
## 15                   &lt;NA&gt;        1993
## 16                   &lt;NA&gt;        2003
## 17                   &lt;NA&gt;        2016
## 18                   &lt;NA&gt;        2007
## 19                   &lt;NA&gt;            
## 20                   &lt;NA&gt;            
## 21                   &lt;NA&gt;        2012
## 22                   &lt;NA&gt;        2001
## 23                   &lt;NA&gt;        1997
## 24                   &lt;NA&gt;        2013
## 25                   &lt;NA&gt;            
## 26                   &lt;NA&gt;        2015
## 27                   &lt;NA&gt;        2016
## 28                   &lt;NA&gt;        2010
## 29                   &lt;NA&gt;        2013
## 30                   &lt;NA&gt;        1992
## 31                   &lt;NA&gt;        2001
## 32                   &lt;NA&gt;        1984
## 33                   &lt;NA&gt;        1991
## 34                   &lt;NA&gt;        1982
## 35                   &lt;NA&gt;        2013
## 36                   &lt;NA&gt;        1989
## 37                   &lt;NA&gt;        1994
## 38                   &lt;NA&gt;        2013
## 39                   &lt;NA&gt;    1993[59]
## 40                   &lt;NA&gt;        2011
## 41    Antigua and Barbuda        2012
## 42                  Aruba        1981
## 43                Bahamas        &lt;NA&gt;
## 44               Barbados        2013
## 45         Cayman Islands        &lt;NA&gt;
## 46                Curaçao        &lt;NA&gt;
## 47     Dominican Republic        1994
## 48                Jamaica        1985
## 49            Saint Lucia        &lt;NA&gt;
## 50            Puerto Rico        1963
## 51           Sint Maarten        &lt;NA&gt;
## 52    Trinidad and Tobago        2008
## 53  Saint Kitts and Nevis        2017
## 54    U.S. Virgin Islands        &lt;NA&gt;
## 55                Andorra            
## 56                Austria            
## 57                Armenia        2017
## 58             Azerbaijan        2018
## 59                Belarus        2015
## 60                Belgium        2017
## 61               Bulgaria        2008
## 62                Croatia        2014
## 63                 Cyprus        2003
## 64         Czech Republic        2008
## 65                Denmark        1977
## 66                Estonia        2016
## 67          Faroe Islands            
## 68                Finland        2013
## 69                 France        2012
## 70                Georgia        2013
## 71                Germany        1976
## 72              Gibraltar            
## 73                 Greece        2018
## 74                Hungary        1991
## 75                Ireland        1981
## 76                  Italy        1999
## 77                 Jersey        2016
## 78             Luxembourg        2017
## 79              Macedonia        2011
## 80                  Malta            
## 81                Moldova            
## 82            Netherlands        1981
## 83                 Norway        1988
## 84                 Poland        1992
## 85               Portugal    2001[81]
## 86                 Russia        2010
## 87               Slovakia        2018
## 88               Slovenia        2011
## 89                  Spain        1975
## 90                 Sweden        1976
## 91            Switzerland            
## 92                 Turkey        1995
## 93         United Kingdom        1977
## 94                 Canada        1968
## 95             Costa Rica        1991
## 96            El Salvador        1994
## 97              Guatemala        1989
## 98               Honduras        &lt;NA&gt;
## 99                 Mexico        1991
## 100             Nicaragua        &lt;NA&gt;
## 101                Panama        &lt;NA&gt;
## 102         United States    19541957
## 103             Australia        1971
## 104                  Guam        &lt;NA&gt;
## 105                  Fiji        2015
## 106           New Zealand        1993
## 107             Argentina        1989
## 108               Bolivia        2002
## 109                Brazil        2006
## 110              Colombia        2008
## 111                 Chile        1994
## 112               Ecuador   1982[117]
## 113         French Guiana            
## 114                Guyana            
## 115              Paraguay        1995
## 116                  Peru   1993[120]
## 117              Suriname        2008
## 118               Uruguay        2008
## 119             Venezuela   1980[123]
##                                                                       Masterfranchisee
## 1                                                                         Olayan Group
## 2                                                               SIA QSR Ghana Ltd.[19]
## 3                                                                Servair Côte d&#39;Ivoire
## 4                                                                    Servair Kenya[20]
## 5                                                          General First Food Services
## 6                                                  BURGER KING® South Africa (Pty) Ltd
## 7                                           Army and Air ForceExchange Service (AAFES)
## 8                                                           Jawad Business Group (UAE)
## 9                                                             Tiffin Box (Bangla Trac)
## 10                                                                    Sinofood Express
## 11                                                                                    
## 12                                                                                    
## 13                                             North Asia Strategic Holdings, Ltd.[38]
## 14                                 Blue Foods (western India), Everstone (North India)
## 15                                                           PT. Mitra Adiperkasa, Tbk
## 16                                                                               AAFES
## 17                                                                    Pierre Besnainou
## 18                                                              Lotteria (South Korea)
## 19                                                            Jordan American Food Co.
## 20                                                                   AAFESOlayan Group
## 21                                                                       Verny Capital
## 22                                                             King Food SAL (Lebanon)
## 23                                                       Cosmo Restaurants Sdn Bhd[44]
## 24                                                  Minor International &amp; Conglomerate
## 25                                              North Asia Strategic Holdings, Ltd[38]
## 26                                                                                    
## 27                                                                    Minor Food Group
## 28                                                            First Food Services Oman
## 29                                                                           MCR Group
## 30                                       Jollibee Foods Corporation and BK Titans Inc.
## 31                                                               Premier Food Services
## 32                                                        Affinity Equity Partners[49]
## 33                                                                        Olayan Group
## 34                                                      Burger King Singapore Pte. Ltd
## 35  Softlogic Restaurants Pvt Ltd (a fully owned subsidiary of Softlogic Holdings PLC)
## 36                                                             DaChan Great Wall Group
## 37                                                        The Minor Food Group[57][58]
## 38                                                                 Fast Food Timor Lda
## 39                                                            First Food Services, LLC
## 40                                                                                    
## 41                                                                                    
## 42                                                           All American Burgers Inc.
## 43                                                                                    
## 44                                                                                    
## 45                                                                                    
## 46                                                                                    
## 47                                                                                    
## 48                                                       Restaurant Associates Limited
## 49                                                                                    
## 50                                                                                    
## 51                                                                                    
## 52                                                                                    
## 53                                                                                    
## 54                                                                                    
## 55                                                                                    
## 56                                                               Theophil Holding GmbH
## 57                                                                                    
## 58                                                                                    
## 59                                                                                    
## 60                                                               Burger Brands Belgium
## 61                                                                                    
## 62                                                                                    
## 63                                                                     WOW Burgers[74]
## 64                                 AmRest, BK Team, Autogrill, Lagardere Travel Retail
## 65                                                                                    
## 66                                                                              Restel
## 67                                                                                    
## 68                                                                              Restel
## 69                                                           Bertrand Group, Autogrill
## 70                                                                            TAB Gida
## 71                                                    Burger King Deutschland GmbH[76]
## 72                                                                                    
## 73                                                                                    
## 74                                                                         Fusion Kft.
## 75                                                                           OKR Group
## 76                                                                           Autogrill
## 77                                                                        Sandpiper CI
## 78                                                                                    
## 79                                                                            TAB Gida
## 80                                                                Simonds Farsons Cisk
## 81                                                                                    
## 82                                                                                    
## 83                                                                      King Foods[80]
## 84                                               AmRest, Burger King Poland, Autogrill
## 85                                                                       Ibersol Group
## 86          Burger Rus Ltd (joint company of VTB and Shokoladnitsa[82]), Ginza Project
## 87                                                                              AmRest
## 88                                                                      Sportina Group
## 89                                                                                    
## 90                                                                      King Foods[80]
## 91                                                                                    
## 92                                                                            TAB Gida
## 93                                                                                    
## 94                                                       Redberry Investments Inc.[98]
## 95                                                                                    
## 96                                                                                    
## 97                                                                                    
## 98                                                                                    
## 99                                                  Burger King Mexicana, S.A. de C.V.
## 100                                                                                   
## 101                                                                                   
## 102                                                            Burger King Corporation
## 103                                                              Hungry Jack&#39;s Pty Ltd
## 104                                                                                   
## 105                                                                     Motibhai Group
## 106                                                                   Blackstone Group
## 107                                                   Fast Food Sudamericana S.A.[112]
## 108                                                           Samuel Doria Medina[113]
## 109                                                                           Multiple
## 110                                                                    Kinco S.A.[115]
## 111                                                   Fast Food Sudamericana S.A.[116]
## 112                                                    Resrap/Alicosta Bk Holding[118]
## 113                                                                                   
## 114                                                                                   
## 115                                                                 Grupo Vierci.[119]
## 116                                                                       Sigdelo S.A.
## 117                                                                           Multiple
## 118                                                                   ADISER S.A.[122]
## 119                                                                                   
##                                                                                                                                                                                                                                                                                                                                                                                                                                                                          Notes
## 1                                                                                                                                                                                                                                                                      Olayan&#39;s food service subsidiary, Hana International, is the master franchisee for the Middle East and north Africa. &lt;U+0628&gt;&lt;U+0631&gt;&lt;U+063A&gt;&lt;U+0631&gt; &lt;U+0643&gt;&lt;U+064A&gt;&lt;U+0646&gt;&lt;U+063A&gt; (Arabic)[17][18]
## 2                                                                                                                                                                                                                                                                                                                                                                                                                                                   Located at the Accra Mall.
## 3                                                                                                                                                                                                                                                                                                                                                                                                                                                First location is in Marcory.
## 4                                                                                                                                                                                                                                                                                                                                                                                                                                First location in the Hub Karen, Nairobi.[21]
## 5                                                                                                                                                                                                                                                                                                                                                                                                                                       First location is in Casablanca; halal
## 6                                                                                                                                                                                                                                                                                                                                                                                     First location opened in Cape Town on 9 May 2013, with plans for more nationwide[22][23]
## 7                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
## 8                                                                                                                                                                                                                                                                                                                                                                                                                                                                    Halal[34]
## 9                                                                                                                                                                                                                                                                                                                                                 Seven branches opened at Banani, Bashundhara, Uttara, Dhanmondi, Jamuna Future Park, Mirpur and Gulshan in Dhaka as of 2017.
## 10                                                                                                                                                                                                                                                                                                                                                                                                             The first store opened in February 2014 in Bandar Seri Begawan.
## 11                                                                                                                                                                                                                                                                                                                                                                                                              Opened in Phnom Penh International Airport on 1 March 2013[35]
## 12                                                                                                                                                                                                                                                                                                                                                                                           &lt;U+6C49&gt;&lt;U+5821&gt;&lt;U+738B&gt; (in Chinese)12,000th location opened in Beijing.[36][37]
## 13                                                                                                                                                                                                                                        &lt;U+6F22&gt;&lt;U+5821&gt;&lt;U+738B&gt; (2006 to present) / &lt;U+5821&gt;&lt;U+52A0&gt;&lt;U+656C&gt; (1970s to early 1980s) / &lt;U+6F22&gt;&lt;U+5821&gt;&lt;U+98FD&gt;&lt;U+738B&gt; (1980s to 1990s)  (in Chinese)Ever operated in Hong Kong (then a British colony) between 1970s–1990s
## 14                                                                                                                                                                                                                                                                                                                                                                                                                           The first store opened in November 2014 in Delhi.
## 15                                                       The first outlet was opened in Blok M Plaza, Jakarta and closed in 1998 after the 1997 Asian financial crisis. It was opened again in April 2007 with the biggest outlet in Southeast Asia, with management from PT. Mitra Adiperkasa, Tbk. The first outlet was in Senayan City, Jakarta. As of December 2017, it is currently operated in Jakarta, Karawang, Bandung, Yogyakarta, Surabaya, Bali and Lombok.\nHalal
## 16                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
## 17  &lt;U+05D1&gt;&lt;U+05E8&gt;&lt;U+05D2&gt;&lt;U+05E8&gt; &lt;U+05E7&gt;&lt;U+05D9&gt;&lt;U+05E0&gt;&lt;U+05D2&gt; (in Hebrew) Previously operated in the country from 1994–2010.\nThe locations were Re-branded as Burger Ranch.[39] In June 2015, the chain announced that it will relaunched in Israel. The first branch in Tel Aviv at the location of Rabin Square was opened in 1 February 2016. Burger king (Israel) has 8 branches: 4 in Tel aviv, and another 4 in Beer sheva, Hertzlia, Raanana and Hod Hasharon.
## 18                                                                                                                                                                                                                                                                                                                                                 &lt;U+30D0&gt;&lt;U+30FC&gt;&lt;U+30AC&gt;&lt;U+30FC&gt;&lt;U+30AD&gt;&lt;U+30F3&gt;&lt;U+30B0&gt; (in Japanese)Previously operated in the country from 1993–2001[40]
## 19                                                                                                                                                                                                                                                                                                                                                                                                                                                                   Halal[41]
## 20                                                                                                                                                                                                                                                                                                                                       The AAFES location opened after the first Gulf War.[42] Olayan has license for Kuwait but there were no locations as of 2011.[17][18]
## 21                                                                                                                                                                                                                                                                                                                                                                                                                                                Opened in May 2012 in Almaty
## 22                                                                                                                                                                                                                                                                                                                                                                                                                                               Subsidiary of OyalanHalal[43]
## 23                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
## 24                                                                                                                                                                                                                                                                                                                                                                                                                Opened at Ibrahim Nasir International Airport on 8 July 2013
## 25                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
## 26                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
## 27                                                                                                                                                                                                                                                                                                                                                                                                                   Opened at Yangon International Airport on 1 July 2016[45]
## 28                                                                                                                                                                                                                                                                                                                                                                                                     Subsidiary of OyalanOriginally operated in the country in 1994–2005[46]
## 29                       The first Burger King branch in Pakistan opened in Dolmen Mall, Karachi on 5 October 2013. This was followed by an aggressive expansion strategy which resulted in opening of Burger King branches nationwide. Currently Burger King has more than twenty branches in Pakistan: various in Karachi, various in Lahore, one in Islamabad, one in Faisalabad, one in Multan, one in Wah Cantt, one in Hyderabad, one in Peshawar and one in Quetta.[47]
## 30                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
## 31                                                                                                                                                                                                                                                                                                                                                                                                                                                                   Halal[48]
## 32                                                                                                                                                                                                                                    &lt;U+BC84&gt;&lt;U+AC70&gt;&lt;U+D0B9&gt;(in Korean)South Korea received its first Burger King store in 1984, and has 236 outlets as of November 2016.[50] Burger King&#39;s 1000th store in Asia also opened in this country (Gwacheon) in January 2013.[51]
## 33                                                                                                                                                                                                                                                                                                                                                                                      &lt;U+0628&gt;&lt;U+0631&gt;&lt;U+063A&gt;&lt;U+0631&gt; &lt;U+0643&gt;&lt;U+064A&gt;&lt;U+0646&gt;&lt;U+063A&gt; (in Arabic)Halal[52]
## 34                                                                                                                                                                                                                                                                                                                                                                                                                                   Halal[53]First BK Whopper Bar in Asia[54]
## 35                                                                                                                                                                                                                                                                                                                                                                                                                    As of April 2017, there are 15 outlets in Sri Lanka.[55]
## 36                                                                                                                                                                                                                                                                                                                                                                                                                                   &lt;U+6F22&gt;&lt;U+5821&gt;&lt;U+738B&gt; (in Chinese)[56]
## 37                                                                                                                                                                                                                                                                                                                                                                                                                                                    Offers delivery services
## 38                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
## 39                                                                                                                                                                                                                                                                                                                                                                                                                                               Subsidiary of OyalanHalal[60]
## 40                                                                                                                                                                                                                                                                                                                                                                                          Opened at Tan Son Nhat International Airport, Ho Chi Minh City on 27 November 2011
## 41                                                                                                                                                                                                                                                                                                                                                                                                                Opened on 27 March, second branch opened in 1st half of 2013
## 42                                                                                                                                                                                                                                                                                                                                                                                                              First hamburger QSR (quick service restaurant) to enter market
## 43                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
## 44                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
## 45                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
## 46                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
## 47                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
## 48                                                                                                                                                                                                                                                                                                                                                                                                                                             First location in Ocho Rios[62]
## 49                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
## 50                                                                                                                                                                                                                                                                                                                                                                                               First Burger King in Latin America and the Caribbean. 185 outlets as of 2013.
## 51                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
## 52                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
## 53                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
## 54                                                                                                                                                                                                                                                                                                                                                                                                                                                                 Coming Soon
## 55                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
## 56                                                                                                                                                                                                                                                                                                                                                                                                                                               46 restaurants as of May 2017
## 57                                                                                                                                                                                                                                                                                                                                                          The first restaurant was opened in Yerevan on 11 January 2017. Burger king currently has three outlets in Armenia.
## 58                                                                                                                                                                                                                                                                                                                                                                                                                       The first restaurant was opened in Baku on 9 January.
## 59                                                                                                                                                                                                                                                                                                                                                                                              The first restaurant was opened in Minsk on 9 July. 20 outlets as of July 2018
## 60                                                                                                                                                                                                                                                                                                                                                                                                                   Rebranding in part of 101 Quick of Belgium and Luxembourg
## 61                                                                                                                                                                                                                                                                                                                                                                                                                                               14 restaurants as of May 2017
## 62                                                                                                                                                      The first restaurant is located at the Tifon gas station on the A1 freeway.[72] The second restaurant is in the Arena Centar shopping center, and was opened in June 2015.[73] A third outlet was opened in Split in October 2017. An additional 15 outlets are expected to open in the next 3 years.[citation needed]
## 63                                                                                                                                          All Burger King restaurants in Cyprus were closed down, after Burger King Europe launched legal proceedings against King Franchises (the Cyprus franchisee that belonged to businessman Lambros Christofi) in 2012. Burger King re-entered Cyprus in 2014 by opening a restaurant in Paphos on March. 6 outlets as of August 2018.
## 64                                                                                                                                                                                                                                                                                                                                                                                                                                              18 restaurants as of July 2018
## 65                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
## 66                                                                                                                                                                                                                                                                                                                             Operates in Tallink&#39;s cruise ships MS Star and MS Megastar, sailing between Tallinn and Helsinki, Finland. No restaurants outside cruise ships.
## 67                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
## 68                                                                                                                                                         First opened in Tampere in 1983, but closed a few years later. Returning to Finland in 2013, the first restaurant was opened in Helsinki on 13 December. As of October 2017, 37 restaurants had been opened, including two in cruise ships of ferry company Tallink, sailing between Helsinki and Tallinn, Estonia.
## 69                                                            There is one restaurant in Marseille Provence Airport, opened on 22 December 2012. There were no restaurants in France between 1997 and 2012. Returned with a restaurant in Paris, Saint-Lazare Station on 16 December 2013. In late 2015, Burger King took over French competitor Quick and will convert most of their outlets into Burger King. As of May 2018, Burger King has 220 restaurants in France.[75]
## 70                                                                                                                                                                                                                                                                                                                                                                                                                                                           3 outlets in 2018
## 71                                                                                                                                                                                                                                                                                                                                                          First BK Whopper Bar in Europe (Munich). +700 restaurants as of 2018, with plans to expand to 1000 until 2023.[77]
## 72                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
## 73                                                                                                                                                                                                                                                                                                                                                                                                                             First restaurant opens in Rhodes island airport
## 74                                                                                                                                                                                                                                                                                                                                                                                                                                                      40 restaurants as 2018
## 75                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
## 76                                                                                                                                                                                                                                                                                                                                                                                     The first restaurant opened in Milan. There were 155 outlets as of  September 2017.[78]
## 77                                                                                                                                                                                                                                                                                                                                                                                                     There is only one in Jersey,[79] but there were two others in the past.
## 78                                                                                                                                                                                                                                                                                                                                                                                                                   Rebranding in part of 101 Quick of Belgium and Luxembourg
## 79                                                                                                                                                                                                                                                                                                                                   The first Burger King restaurant in the Republic of Macedonia was opened in August 2011, and is located at the Skopje airport. 5 outlets.
## 80                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
## 81                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
## 82                                                                                                                                                                                                                                                                                                                                                                                                                                                      57 restaurants in 2017
## 83                                                                                                                                                                                                                                                                                                                                                                                                                                                   35 restaurants as of 2013
## 84                                                                                                                                                                                                                                                                                                                                                                                                                             There were about 70 outlets by the end of 2013.
## 85                                                                                                                                                                                                                                                                                                                                                                         Ibersol also distributes Pizza Hut and KFC, under license of Yum! Brands. 39 restaurants as of 2013
## 86                                                                                                                                                                                                                                                                                                                                                   The first Russian outlet opened in Moscow on 21 January 2010. &lt;U+0411&gt;yp&lt;U+0433&gt;ep K&lt;U+0438&gt;&lt;U+043D&gt;&lt;U+0433&gt; (in Russian)
## 87                                                                                                                                                                                                                First restaurant opened in March 2010 by Queensway Restaurants Slovakia; closed in December 2011 due to bankruptcy. AmRest got an exclusive license in 2018.[83] In October 2018 Burger King will re-enter Slovakia with first restaurant in Bratislava.[84]
## 88                                                                                                                                                                                                                                                                                                                                                                                  The first restaurant is located in the capital city of Ljubljana; it opened in March 2011.
## 89                                                                      First location in Europe (Madrid)Largest fast food burger chain in Spain[8] Spain is the country with the biggest amount of BK restaurants in Europe, with 701 restaurants as of June 2017.[85] Burger King opened up to 120 new restaurants in Spain from 2015 to 2017, with an expected growth of more than 750 restaurants by 2018.[86] In late 2017 Spain had already 720 Burger King restaurants.
## 90                                                                                                                                                                                                                                                                                                                                                          First location opened in Malmö on Per Albin Hanssons väg. There were 115 restaurants In the beginning of 2016.[87]
## 91                                                                                                                                                                                                                                                                                                                                                                                                                                       In May 2017 there were 55 restaurants
## 92                                                                                                                                                                                                                                                                                                                             Burger King was introduced into Turkey in 1995.[88] There are 611 Burger King restaurants in Turkey as of 2017.[89] Permissible for Muslims[90]
## 93                                                                                                                                                                                                                                                                                                                                                                   The first restaurant was located on Coventry Street in Central London. 484 restaurants in the UK of 2013.
## 94                                                                                                                                                                                                                                                                                                                                                                                                                                            First international location[99]
## 95                                                                                                                                                                                                                                                                                                                   Closed in October 2015 because of numerous issues with local franchiser and license usage; returned in June 2016 with a new restaurant opened in San José
## 96                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
## 97                                                                                                                                                                                                                                                                                                                                                                                                                                        First location in La zona nueve[100]
## 98                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
## 99                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
## 100                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
## 101                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
## 102                                                                                                                                                                                                                                                                                                                                                                                                 Founded as Insta-Burger King in 1954; purchased in 1957 by current company
## 103                                                                                                                                                                                                                                                                                                                                                                                                                      Hungry Jack&#39;s is the master franchisee for Australia.
## 104                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
## 105                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
## 106                                                                                                                                                                                                                                                                                                                                                                                                                 Original owners, TPF Group, sold the company in 2009.[111]
## 107                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
## 108                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
## 109                                                                                                                                                                                                                                                                                                                                                                                                                         Operates with a territorial franchises system[114]
## 110                                                                                                                                                                                                                                                                                                                                                                                                                                                      Operated during 1980s
## 111                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
## 112                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
## 113                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
## 114                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
## 115                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
## 116                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
## 117                                                                                                                                                                                                                                                                                                                                                                                                    The first restaurant is located in the capital city of Paramaribo.[121]
## 118                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
## 119                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
##                  Country
## 1                   &lt;NA&gt;
## 2                   &lt;NA&gt;
## 3                   &lt;NA&gt;
## 4                   &lt;NA&gt;
## 5                   &lt;NA&gt;
## 6                   &lt;NA&gt;
## 7            Afghanistan
## 8                Bahrain
## 9             Bangladesh
## 10                Brunei
## 11              Cambodia
## 12                 China
## 13             Hong Kong
## 14                 India
## 15             Indonesia
## 16                  Iraq
## 17                Israel
## 18                 Japan
## 19                Jordan
## 20                Kuwait
## 21            Kazakhstan
## 22               Lebanon
## 23              Malaysia
## 24              Maldives
## 25                 Macau
## 26              Mongolia
## 27               Myanmar
## 28                  Oman
## 29              Pakistan
## 30           Philippines
## 31                 Qatar
## 32           South Korea
## 33          Saudi Arabia
## 34             Singapore
## 35             Sri Lanka
## 36                Taiwan
## 37              Thailand
## 38           Timor-Leste
## 39  United Arab Emirates
## 40               Vietnam
## 41                  &lt;NA&gt;
## 42                  &lt;NA&gt;
## 43                  &lt;NA&gt;
## 44                  &lt;NA&gt;
## 45                  &lt;NA&gt;
## 46                  &lt;NA&gt;
## 47                  &lt;NA&gt;
## 48                  &lt;NA&gt;
## 49                  &lt;NA&gt;
## 50                  &lt;NA&gt;
## 51                  &lt;NA&gt;
## 52                  &lt;NA&gt;
## 53                  &lt;NA&gt;
## 54                  &lt;NA&gt;
## 55                  &lt;NA&gt;
## 56                  &lt;NA&gt;
## 57                  &lt;NA&gt;
## 58                  &lt;NA&gt;
## 59                  &lt;NA&gt;
## 60                  &lt;NA&gt;
## 61                  &lt;NA&gt;
## 62                  &lt;NA&gt;
## 63                  &lt;NA&gt;
## 64                  &lt;NA&gt;
## 65                  &lt;NA&gt;
## 66                  &lt;NA&gt;
## 67                  &lt;NA&gt;
## 68                  &lt;NA&gt;
## 69                  &lt;NA&gt;
## 70                  &lt;NA&gt;
## 71                  &lt;NA&gt;
## 72                  &lt;NA&gt;
## 73                  &lt;NA&gt;
## 74                  &lt;NA&gt;
## 75                  &lt;NA&gt;
## 76                  &lt;NA&gt;
## 77                  &lt;NA&gt;
## 78                  &lt;NA&gt;
## 79                  &lt;NA&gt;
## 80                  &lt;NA&gt;
## 81                  &lt;NA&gt;
## 82                  &lt;NA&gt;
## 83                  &lt;NA&gt;
## 84                  &lt;NA&gt;
## 85                  &lt;NA&gt;
## 86                  &lt;NA&gt;
## 87                  &lt;NA&gt;
## 88                  &lt;NA&gt;
## 89                  &lt;NA&gt;
## 90                  &lt;NA&gt;
## 91                  &lt;NA&gt;
## 92                  &lt;NA&gt;
## 93                  &lt;NA&gt;
## 94                  &lt;NA&gt;
## 95                  &lt;NA&gt;
## 96                  &lt;NA&gt;
## 97                  &lt;NA&gt;
## 98                  &lt;NA&gt;
## 99                  &lt;NA&gt;
## 100                 &lt;NA&gt;
## 101                 &lt;NA&gt;
## 102                 &lt;NA&gt;
## 103                 &lt;NA&gt;
## 104                 &lt;NA&gt;
## 105                 &lt;NA&gt;
## 106                 &lt;NA&gt;
## 107                 &lt;NA&gt;
## 108                 &lt;NA&gt;
## 109                 &lt;NA&gt;
## 110                 &lt;NA&gt;
## 111                 &lt;NA&gt;
## 112                 &lt;NA&gt;
## 113                 &lt;NA&gt;
## 114                 &lt;NA&gt;
## 115                 &lt;NA&gt;
## 116                 &lt;NA&gt;
## 117                 &lt;NA&gt;
## 118                 &lt;NA&gt;
## 119                 &lt;NA&gt;</code></pre>
<p>A quick inspection of the data shows a few things. We have unexpectedly brought the reference numbers with us, which makes the year column wrong and some tables had country/territory, whilst others simply contained country. And some observations have no year at all.</p>
<p>So lets fix that!</p>
<pre class="r"><code>tidy_data &lt;- data %&gt;%
  mutate(country = ifelse(is.na(Country), `Country/territory`, Country)) %&gt;%
  mutate(year = as.numeric(str_sub(Yearentered, end=4))) %&gt;%
  filter(!is.na(year))</code></pre>
<p>Now we have the data as we need it, right?</p>
<p>Lets now get the spatial data we need to plot the results. This comes from the very handy <code>rnaturalearth</code> package.</p>
<pre class="r"><code>countries_sf &lt;- ne_countries(scale = &quot;medium&quot;, returnclass = &quot;sf&quot;)
glimpse(countries_sf)</code></pre>
<pre><code>## Observations: 241
## Variables: 95
## $ featurecla &lt;chr&gt; &quot;Admin-0 country&quot;, &quot;Admin-0 country&quot;, &quot;Admin-0 coun...
## $ scalerank  &lt;int&gt; 1, 1, 1, 3, 5, 6, 1, 1, 1, 3, 5, 3, 3, 3, 3, 1, 5, ...
## $ labelrank  &lt;int&gt; 3, 3, 3, 2, 3, 6, 4, 3, 4, 6, 6, 6, 6, 6, 4, 5, 2, ...
## $ sovereignt &lt;chr&gt; &quot;Zimbabwe&quot;, &quot;Zambia&quot;, &quot;Yemen&quot;, &quot;Vietnam&quot;, &quot;Venezuel...
## $ sov_a3     &lt;chr&gt; &quot;ZWE&quot;, &quot;ZMB&quot;, &quot;YEM&quot;, &quot;VNM&quot;, &quot;VEN&quot;, &quot;VAT&quot;, &quot;VUT&quot;, &quot;U...
## $ adm0_dif   &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, ...
## $ level      &lt;int&gt; 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, ...
## $ type       &lt;chr&gt; &quot;Sovereign country&quot;, &quot;Sovereign country&quot;, &quot;Sovereig...
## $ admin      &lt;chr&gt; &quot;Zimbabwe&quot;, &quot;Zambia&quot;, &quot;Yemen&quot;, &quot;Vietnam&quot;, &quot;Venezuel...
## $ adm0_a3    &lt;chr&gt; &quot;ZWE&quot;, &quot;ZMB&quot;, &quot;YEM&quot;, &quot;VNM&quot;, &quot;VEN&quot;, &quot;VAT&quot;, &quot;VUT&quot;, &quot;U...
## $ geou_dif   &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ...
## $ geounit    &lt;chr&gt; &quot;Zimbabwe&quot;, &quot;Zambia&quot;, &quot;Yemen&quot;, &quot;Vietnam&quot;, &quot;Venezuel...
## $ gu_a3      &lt;chr&gt; &quot;ZWE&quot;, &quot;ZMB&quot;, &quot;YEM&quot;, &quot;VNM&quot;, &quot;VEN&quot;, &quot;VAT&quot;, &quot;VUT&quot;, &quot;U...
## $ su_dif     &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ...
## $ subunit    &lt;chr&gt; &quot;Zimbabwe&quot;, &quot;Zambia&quot;, &quot;Yemen&quot;, &quot;Vietnam&quot;, &quot;Venezuel...
## $ su_a3      &lt;chr&gt; &quot;ZWE&quot;, &quot;ZMB&quot;, &quot;YEM&quot;, &quot;VNM&quot;, &quot;VEN&quot;, &quot;VAT&quot;, &quot;VUT&quot;, &quot;U...
## $ brk_diff   &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ...
## $ name       &lt;chr&gt; &quot;Zimbabwe&quot;, &quot;Zambia&quot;, &quot;Yemen&quot;, &quot;Vietnam&quot;, &quot;Venezuel...
## $ name_long  &lt;chr&gt; &quot;Zimbabwe&quot;, &quot;Zambia&quot;, &quot;Yemen&quot;, &quot;Vietnam&quot;, &quot;Venezuel...
## $ brk_a3     &lt;chr&gt; &quot;ZWE&quot;, &quot;ZMB&quot;, &quot;YEM&quot;, &quot;VNM&quot;, &quot;VEN&quot;, &quot;VAT&quot;, &quot;VUT&quot;, &quot;U...
## $ brk_name   &lt;chr&gt; &quot;Zimbabwe&quot;, &quot;Zambia&quot;, &quot;Yemen&quot;, &quot;Vietnam&quot;, &quot;Venezuel...
## $ brk_group  &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...
## $ abbrev     &lt;chr&gt; &quot;Zimb.&quot;, &quot;Zambia&quot;, &quot;Yem.&quot;, &quot;Viet.&quot;, &quot;Ven.&quot;, &quot;Vat.&quot;,...
## $ postal     &lt;chr&gt; &quot;ZW&quot;, &quot;ZM&quot;, &quot;YE&quot;, &quot;VN&quot;, &quot;VE&quot;, &quot;V&quot;, &quot;VU&quot;, &quot;UZ&quot;, &quot;UY&quot;...
## $ formal_en  &lt;chr&gt; &quot;Republic of Zimbabwe&quot;, &quot;Republic of Zambia&quot;, &quot;Repu...
## $ formal_fr  &lt;chr&gt; NA, NA, NA, NA, &quot;República Bolivariana de Venezuela...
## $ name_ciawf &lt;chr&gt; &quot;Zimbabwe&quot;, &quot;Zambia&quot;, &quot;Yemen&quot;, &quot;Vietnam&quot;, &quot;Venezuel...
## $ note_adm0  &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, &quot;Common...
## $ note_brk   &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...
## $ name_sort  &lt;chr&gt; &quot;Zimbabwe&quot;, &quot;Zambia&quot;, &quot;Yemen, Rep.&quot;, &quot;Vietnam&quot;, &quot;Ve...
## $ name_alt   &lt;chr&gt; NA, NA, NA, NA, NA, &quot;Holy See&quot;, NA, NA, NA, NA, NA,...
## $ mapcolor7  &lt;int&gt; 1, 5, 5, 5, 1, 1, 6, 2, 1, 5, 2, 4, 4, 4, 4, 4, 4, ...
## $ mapcolor8  &lt;int&gt; 5, 8, 3, 6, 3, 3, 3, 3, 2, 2, 5, 5, 5, 5, 5, 5, 5, ...
## $ mapcolor9  &lt;int&gt; 3, 5, 3, 5, 1, 4, 7, 5, 2, 4, 5, 1, 1, 1, 1, 1, 1, ...
## $ mapcolor13 &lt;int&gt; 9, 13, 11, 4, 4, 2, 3, 4, 10, 13, 3, 1, 1, 1, 1, 1,...
## $ pop_est    &lt;chr&gt; &quot;13805084&quot;, &quot;15972000&quot;, &quot;28036829&quot;, &quot;96160163&quot;, &quot;31...
## $ pop_rank   &lt;int&gt; 14, 14, 15, 16, 15, 3, 10, 15, 12, 9, 8, 8, 9, 9, 8...
## $ gdp_md_est &lt;dbl&gt; 2.833e+04, 6.517e+04, 7.345e+04, 5.949e+05, 4.686e+...
## $ pop_year   &lt;int&gt; 2017, 2017, 2017, 2017, 2017, 2015, 2017, 2017, 201...
## $ lastcensus &lt;int&gt; 2002, 2010, 2004, 2009, 2001, NA, 2009, 1989, 2004,...
## $ gdp_year   &lt;int&gt; 2016, 2016, 2016, 2016, 2016, 0, 2016, 2016, 2016, ...
## $ economy    &lt;chr&gt; &quot;5. Emerging region: G20&quot;, &quot;7. Least developed regi...
## $ income_grp &lt;chr&gt; &quot;5. Low income&quot;, &quot;4. Lower middle income&quot;, &quot;4. Lowe...
## $ wikipedia  &lt;int&gt; NA, NA, NA, NA, NA, 0, NA, NA, NA, NA, NA, NA, NA, ...
## $ fips_10_   &lt;chr&gt; &quot;ZI&quot;, &quot;ZA&quot;, &quot;YM&quot;, &quot;VM&quot;, &quot;VE&quot;, &quot;VT&quot;, &quot;NH&quot;, &quot;UZ&quot;, &quot;UY...
## $ iso_a2     &lt;chr&gt; &quot;ZW&quot;, &quot;ZM&quot;, &quot;YE&quot;, &quot;VN&quot;, &quot;VE&quot;, &quot;VA&quot;, &quot;VU&quot;, &quot;UZ&quot;, &quot;UY...
## $ iso_a3     &lt;chr&gt; &quot;ZWE&quot;, &quot;ZMB&quot;, &quot;YEM&quot;, &quot;VNM&quot;, &quot;VEN&quot;, &quot;VAT&quot;, &quot;VUT&quot;, &quot;U...
## $ iso_a3_eh  &lt;chr&gt; &quot;ZWE&quot;, &quot;ZMB&quot;, &quot;YEM&quot;, &quot;VNM&quot;, &quot;VEN&quot;, &quot;VAT&quot;, &quot;VUT&quot;, &quot;U...
## $ iso_n3     &lt;chr&gt; &quot;716&quot;, &quot;894&quot;, &quot;887&quot;, &quot;704&quot;, &quot;862&quot;, &quot;336&quot;, &quot;548&quot;, &quot;8...
## $ un_a3      &lt;chr&gt; &quot;716&quot;, &quot;894&quot;, &quot;887&quot;, &quot;704&quot;, &quot;862&quot;, &quot;336&quot;, &quot;548&quot;, &quot;8...
## $ wb_a2      &lt;chr&gt; &quot;ZW&quot;, &quot;ZM&quot;, &quot;RY&quot;, &quot;VN&quot;, &quot;VE&quot;, NA, &quot;VU&quot;, &quot;UZ&quot;, &quot;UY&quot;,...
## $ wb_a3      &lt;chr&gt; &quot;ZWE&quot;, &quot;ZMB&quot;, &quot;YEM&quot;, &quot;VNM&quot;, &quot;VEN&quot;, NA, &quot;VUT&quot;, &quot;UZB&quot;...
## $ woe_id     &lt;int&gt; 23425004, 23425003, 23425002, 23424984, 23424982, 2...
## $ woe_id_eh  &lt;int&gt; 23425004, 23425003, 23425002, 23424984, 23424982, 2...
## $ woe_note   &lt;chr&gt; &quot;Exact WOE match as country&quot;, &quot;Exact WOE match as c...
## $ adm0_a3_is &lt;chr&gt; &quot;ZWE&quot;, &quot;ZMB&quot;, &quot;YEM&quot;, &quot;VNM&quot;, &quot;VEN&quot;, &quot;VAT&quot;, &quot;VUT&quot;, &quot;U...
## $ adm0_a3_us &lt;chr&gt; &quot;ZWE&quot;, &quot;ZMB&quot;, &quot;YEM&quot;, &quot;VNM&quot;, &quot;VEN&quot;, &quot;VAT&quot;, &quot;VUT&quot;, &quot;U...
## $ adm0_a3_un &lt;int&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...
## $ adm0_a3_wb &lt;int&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...
## $ continent  &lt;chr&gt; &quot;Africa&quot;, &quot;Africa&quot;, &quot;Asia&quot;, &quot;Asia&quot;, &quot;South America&quot;...
## $ region_un  &lt;chr&gt; &quot;Africa&quot;, &quot;Africa&quot;, &quot;Asia&quot;, &quot;Asia&quot;, &quot;Americas&quot;, &quot;Eu...
## $ subregion  &lt;chr&gt; &quot;Eastern Africa&quot;, &quot;Eastern Africa&quot;, &quot;Western Asia&quot;,...
## $ region_wb  &lt;chr&gt; &quot;Sub-Saharan Africa&quot;, &quot;Sub-Saharan Africa&quot;, &quot;Middle...
## $ name_len   &lt;int&gt; 8, 6, 5, 7, 9, 7, 7, 10, 7, 10, 12, 14, 15, 4, 14, ...
## $ long_len   &lt;int&gt; 8, 6, 5, 7, 9, 7, 7, 10, 7, 30, 16, 24, 28, 4, 14, ...
## $ abbrev_len &lt;int&gt; 5, 6, 4, 5, 4, 4, 4, 4, 4, 6, 6, 6, 11, 4, 9, 4, 6,...
## $ tiny       &lt;int&gt; NA, NA, NA, 2, NA, 4, 2, 5, NA, NA, 2, 3, 3, 2, 3, ...
## $ homepart   &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, NA, NA, NA, NA, NA...
## $ min_zoom   &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ...
## $ min_label  &lt;dbl&gt; 3.0, 3.0, 3.0, 2.0, 3.0, 5.0, 4.0, 3.0, 3.0, 5.0, 5...
## $ max_label  &lt;dbl&gt; 8.0, 8.0, 8.0, 7.0, 7.5, 10.0, 9.0, 8.0, 8.0, 10.0,...
## $ ne_id      &lt;chr&gt; &quot;1159321441&quot;, &quot;1159321439&quot;, &quot;1159321425&quot;, &quot;11593214...
## $ wikidataid &lt;chr&gt; &quot;Q954&quot;, &quot;Q953&quot;, &quot;Q805&quot;, &quot;Q881&quot;, &quot;Q717&quot;, &quot;Q237&quot;, &quot;Q6...
## $ name_ar    &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...
## $ name_bn    &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...
## $ name_de    &lt;chr&gt; &quot;Simbabwe&quot;, &quot;Sambia&quot;, &quot;Jemen&quot;, &quot;Vietnam&quot;, &quot;Venezuel...
## $ name_en    &lt;chr&gt; &quot;Zimbabwe&quot;, &quot;Zambia&quot;, &quot;Yemen&quot;, &quot;Vietnam&quot;, &quot;Venezuel...
## $ name_es    &lt;chr&gt; &quot;Zimbabue&quot;, &quot;Zambia&quot;, &quot;Yemen&quot;, &quot;Vietnam&quot;, &quot;Venezuel...
## $ name_fr    &lt;chr&gt; &quot;Zimbabwe&quot;, &quot;Zambie&quot;, &quot;Yémen&quot;, &quot;Viêt Nam&quot;, &quot;Venezue...
## $ name_el    &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...
## $ name_hi    &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...
## $ name_hu    &lt;chr&gt; &quot;Zimbabwe&quot;, &quot;Zambia&quot;, &quot;Jemen&quot;, &quot;Vietnám&quot;, &quot;Venezuel...
## $ name_id    &lt;chr&gt; &quot;Zimbabwe&quot;, &quot;Zambia&quot;, &quot;Yaman&quot;, &quot;Vietnam&quot;, &quot;Venezuel...
## $ name_it    &lt;chr&gt; &quot;Zimbabwe&quot;, &quot;Zambia&quot;, &quot;Yemen&quot;, &quot;Vietnam&quot;, &quot;Venezuel...
## $ name_ja    &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...
## $ name_ko    &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...
## $ name_nl    &lt;chr&gt; &quot;Zimbabwe&quot;, &quot;Zambia&quot;, &quot;Jemen&quot;, &quot;Vietnam&quot;, &quot;Venezuel...
## $ name_pl    &lt;chr&gt; &quot;Zimbabwe&quot;, &quot;Zambia&quot;, &quot;Jemen&quot;, &quot;Wietnam&quot;, &quot;Wenezuel...
## $ name_pt    &lt;chr&gt; &quot;Zimbábue&quot;, &quot;Zâmbia&quot;, &quot;Iémen&quot;, &quot;Vietname&quot;, &quot;Venezue...
## $ name_ru    &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...
## $ name_sv    &lt;chr&gt; &quot;Zimbabwe&quot;, &quot;Zambia&quot;, &quot;Jemen&quot;, &quot;Vietnam&quot;, &quot;Venezuel...
## $ name_tr    &lt;chr&gt; &quot;Zimbabve&quot;, &quot;Zambiya&quot;, &quot;Yemen&quot;, &quot;Vietnam&quot;, &quot;Venezue...
## $ name_vi    &lt;chr&gt; &quot;Zimbabwe&quot;, &quot;Zambia&quot;, &quot;Yemen&quot;, NA, &quot;Venezuela&quot;, &quot;Th...
## $ name_zh    &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...
## $ geometry   &lt;MULTIPOLYGON [Â°]&gt; MULTIPOLYGON (((31.28789 -2..., MULTI...</code></pre>
<p>A quick glimpse at the data shows a <code>name_en</code> variable that should hopefully match with our <code>country</code> variable in our previous dataset. However what if some of the country names don’t match up?</p>
<pre class="r"><code>mismatches &lt;- tidy_data %&gt;%
  anti_join(countries_sf, by  = c(&quot;country&quot; = &quot;name_en&quot;))
mismatches</code></pre>
<pre><code>##   Country/territory Yearentered        Masterfranchisee
## 1              &lt;NA&gt;        2005                        
## 2              &lt;NA&gt;        2013     Fast Food Timor Lda
## 3         Macedonia        2011                TAB Gida
## 4     United States    19541957 Burger King Corporation
##                                                                                                                                       Notes
## 1                                                         &lt;U+6C49&gt;&lt;U+5821&gt;&lt;U+738B&gt; (in Chinese)12,000th location opened in Beijing.[36][37]
## 2                                                                                                                                          
## 3 The first Burger King restaurant in the Republic of Macedonia was opened in August 2011, and is located at the Skopje airport. 5 outlets.
## 4                                                                Founded as Insta-Burger King in 1954; purchased in 1957 by current company
##       Country       country year
## 1       China         China 2005
## 2 Timor-Leste   Timor-Leste 2013
## 3        &lt;NA&gt;     Macedonia 2011
## 4        &lt;NA&gt; United States 1954</code></pre>
<p>Uh-oh, 4 countries don’t match up. As its a small amount it seemed appropriate to define a new dataset for these countries.</p>
<pre class="r"><code>country_match &lt;- tribble(
  ~country, ~sf_country,
  &quot;United States&quot;, &quot;United States of America&quot;,
  &quot;Macedonia&quot;, &quot;Republic of Macedonia&quot;,
  &quot;Timor-Leste&quot;, &quot;East Timor&quot;,
  &quot;China&quot;, &quot;People&#39;s Republic of China&quot;)
country_match</code></pre>
<pre><code>## # A tibble: 4 x 2
##   country       sf_country                
##   &lt;chr&gt;         &lt;chr&gt;                     
## 1 United States United States of America  
## 2 Macedonia     Republic of Macedonia     
## 3 Timor-Leste   East Timor                
## 4 China         People&#39;s Republic of China</code></pre>
<p>We can now completely join the spatial data to the important data.</p>
<pre class="r"><code>joined_data &lt;- 
  tidy_data %&gt;%
  left_join(country_match) %&gt;%
  mutate(country = ifelse(is.na(sf_country), country, sf_country)) %&gt;%
  left_join(countries_sf,  by  = c(&quot;country&quot; = &quot;name_en&quot;))</code></pre>
<pre><code>## Joining, by = &quot;country&quot;</code></pre>
<p>Now we have all of data in one dataframe!</p>
<p>Firstly lets show a quick plot of the countries, using ggplot and sf.</p>
<pre class="r"><code>ggplot() + geom_sf(data = countries_sf) </code></pre>
<p><img src="/post/2018-08-12-the-burger-king-pandemic_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<p>And now lets pull all the pieces together.</p>
<pre class="r"><code>plot_fun &lt;- function(open_year){
p &lt;- ggplot() + geom_sf(data = filter(countries_sf, name_en != &quot;Antarctica&quot;)) + 
  geom_sf(data = filter(tidy_data3, year &lt;= open_year), aes(fill = rgb(236, 28, 36, maxColorValue = 255))) + 
  theme_void() + coord_sf(datum=NA) + guides(fill=FALSE) + 
  labs(title = glue(&quot;    Countries with a Burger King, year: {open_year}&quot;),
       subtitle = glue(&quot;      Count of countries: {nrow(filter(tidy_data3, year &lt;= open_year))}&quot;))
print(p)
}</code></pre>
<pre class="r"><code>save_gif(walk(min(tidy_data3$year):max(tidy_data3$year), plot_fun), delay = 0.5, gif_file = &quot;animation.gif&quot;)</code></pre>
<p>And we get the final output:</p>
<div class="figure">
<img src="/img/bk.gif" alt="Burger King Animation" />
<p class="caption">Burger King Animation</p>
</div>
<p>P.S. I did quickly briefly add in a <code>transition_time(year)</code> using gganimate, just to experiment and see what happenes. Surprisingly it did make something!</p>
<div class="figure">
<img src="/img/bk2.gif" />

</div>
