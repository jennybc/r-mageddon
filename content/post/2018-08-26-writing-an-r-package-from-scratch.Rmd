---
title: Writing an R package from scratch
author: Tom Westlake
date: '2018-08-26'
slug: writing-an-r-package-from-scratch
categories: []
tags:
  - beginner
  - package
  - software development
description: ''
thumbnail: 'img/dogs_hex.png'
---

Anyone who has created their own R package has probably come across [Hilary Parker's awesome blogpost](https://hilaryparker.com/2014/04/29/writing-an-r-package-from-scratch/), that walks you through creating your very first R package. The comprehensive detail on everything R packages can be found in [Hadley Wickham's superb book](http://r-pkgs.had.co.nz/). 

In this post I am going to walk through some of the developments in the package development space since Hilary wrote her blog four years ago, in particular focussing on the relatively recent `usethis` package. My main motivation coming from Hadley's tweet:

<blockquote class="twitter-tweet" data-partner="tweetdeck"><p lang="en" dir="ltr">A super useful contribution would be to take <a href="https://twitter.com/hspter?ref_src=twsrc%5Etfw">@hspter</a>â€™s awesome post and update it to use the latest usethis goodies <a href="https://t.co/ozb2M8lpuk">https://t.co/ozb2M8lpuk</a></p>&mdash; Hadley Wickham (@hadleywickham) <a href="https://twitter.com/hadleywickham/status/1029435522937225216?ref_src=twsrc%5Etfw">August 14, 2018</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>


### Step 0: Packages we need

The three packages we will use for this are `devtools`, `roxygen2` and `usethis`.

```{r, eval = F}
pkgs <- c("devtools", "roxygen2", "usethis")
install.packages(pkgs)
library(devtools)
library(roxygen2)
library(usethis)
```

### Step 1: Creating the package

The easiest way to create your package is to use `usethis::create_package`.

```{r, eval = F}
create_package("dogs")
```

This will create our package `"dogs"` in our current working directory. You can explicity state the path if you wish to create it elsewhere, e.g. `"C:/Users/Tom/Documents/dogs"`. Hopefully upon completion you should see the following:

![](img/dogs_hex.png)

### Step 2: Adding functions

We can utilise `usethis::use_r` to create our function.

```{r, eval = F}
use_r("dog_functions")
```

Now we can add the functions we wish to this file. If you don't have any ready ones to hand, I've provided an example below:

```{r}
dogs_over_cats <- function(agree=TRUE){
  if(agree==TRUE){
    print("Woof woof!")
  }
  else {
    print("Try again.")
  }
}

```

Congratulations. You have now created the bare minimum package. You can now load your new function using `ctrl + shift + l`.

Test out your new function:

```{r}
dogs_over_cats()
```

