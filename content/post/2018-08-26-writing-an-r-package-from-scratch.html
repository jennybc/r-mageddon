---
draft: yes
title: Writing an R package from scratch
author: Tom Westlake
date: '2018-08-26'
slug: writing-an-r-package-from-scratch
categories: []
tags:
  - beginner
  - package
  - software development
description: ''
thumbnail: 'img/dogs_hex.png'
---



<p>Anyone who has created their own R package has probably come across <a href="https://hilaryparker.com/2014/04/29/writing-an-r-package-from-scratch/">Hilary Parker’s awesome blogpost</a>, that walks you through creating your very first R package. The comprehensive detail on everything R packages can be found in <a href="http://r-pkgs.had.co.nz/">Hadley Wickham’s superb book</a>.</p>
<p>In this post I am going to walk through some of the developments in the package development space since Hilary wrote her blog four years ago, in particular focussing on the relatively recent <code>usethis</code> package. My main motivation coming from Hadley’s tweet:</p>
<blockquote class="twitter-tweet" data-partner="tweetdeck">
<p lang="en" dir="ltr">
A super useful contribution would be to take <a href="https://twitter.com/hspter?ref_src=twsrc%5Etfw"><span class="citation">@hspter</span></a>’s awesome post and update it to use the latest usethis goodies <a href="https://t.co/ozb2M8lpuk">https://t.co/ozb2M8lpuk</a>
</p>
— Hadley Wickham (<span class="citation">@hadleywickham</span>) <a href="https://twitter.com/hadleywickham/status/1029435522937225216?ref_src=twsrc%5Etfw">August 14, 2018</a>
</blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<div id="step-0-packages-we-need" class="section level3">
<h3>Step 0: Packages we need</h3>
<p>The three packages we will use for this are <code>devtools</code>, <code>roxygen2</code> and <code>usethis</code>.</p>
<pre class="r"><code>pkgs &lt;- c(&quot;devtools&quot;, &quot;roxygen2&quot;, &quot;usethis&quot;)
install.packages(pkgs)
library(devtools)
library(roxygen2)
library(usethis)</code></pre>
</div>
<div id="step-1-creating-the-package" class="section level3">
<h3>Step 1: Creating the package</h3>
<p>The easiest way to create your package is to use <code>usethis::create_package</code>.</p>
<pre class="r"><code>create_package(&quot;dogs&quot;)</code></pre>
<p>This will create our package <code>&quot;dogs&quot;</code> in our current working directory. You can explicity state the path if you wish to create it elsewhere, e.g. <code>&quot;C:/Users/Tom/Documents/dogs&quot;</code>. Hopefully upon completion you should see the following:</p>
<div class="figure">
<img src="img/dogs_hex.png" />

</div>
</div>
<div id="step-2-adding-functions" class="section level3">
<h3>Step 2: Adding functions</h3>
<p>We can utilise <code>usethis::use_r</code> to create our function.</p>
<pre class="r"><code>use_r(&quot;dog_functions&quot;)</code></pre>
<p>Now we can add the functions we wish to this file. If you don’t have any ready ones to hand, I’ve provided an example below:</p>
<pre class="r"><code>dogs_over_cats &lt;- function(agree=TRUE){
  if(agree==TRUE){
    print(&quot;Woof woof!&quot;)
  }
  else {
    print(&quot;Try again.&quot;)
  }
}</code></pre>
<p>Congratulations. You have now created the bare minimum package. You can now load your new function using <code>ctrl + shift + l</code>.</p>
<p>Test out your new function:</p>
<pre class="r"><code>dogs_over_cats()</code></pre>
<pre><code>## [1] &quot;Woof woof!&quot;</code></pre>
</div>
